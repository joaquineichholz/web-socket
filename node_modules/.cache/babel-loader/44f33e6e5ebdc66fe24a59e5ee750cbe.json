{"ast":null,"code":"var _jsxFileName = \"/home/joaquin/Escritorio/t03-taller_integracion/src/App.js\";\nimport React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nvar socket = socketIOClient('wss://le-18262636.bitzonte.com', {\n  path: '/stocks'\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      updates: []\n    }; //this.startSocket = this.startSocket.bind(this);\n  }\n\n  componentDidMount() {\n    console.log('Página montada');\n    console.log('Encendiendo socket');\n    socket.emit(\"EXCHANGES\", data => {\n      console.log(data);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 5\n      }\n    }, \"HELLO\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      onChange: this.startSocket,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    }), this.state.updates));\n  }\n\n}\n\nexport default App;\n/*import React, { Component } from 'react';\nimport './App.css';\n//import Graph from './components/graph';\nimport io from 'socket.io-client';\nimport './css/navbar.css'\n\nimport Disconnect from './components/disconnect';\nimport Connect from './components/connect';\nimport Stock from './components/stock';\nimport Price from './components/prices';\n\n\nconst protocolo = \"wss://\";\nconst servidor = \"le-18262636.bitzonte.com\";\nconst ruta = \"/stocks\";\n\nconst socket = io(protocolo + servidor , {\n  path: ruta\n  });\n\n\n\n\n\n\n\nclass App extends Component {\n\n  state = {\n      stock: [\n      ],\n\n      prices: [\n\n      ]\n  }\n  update = (current) => {    \n    //console.log(this.state.prices)\n    var new_ticker = true;\n\n    this.setState({prices: this.state.prices.map( data => {  \n        if (data.ticker === current.ticker) {\n          data.value.push(current.value)\n          data.time.push(current.time)\n          var j = 1;\n          var value = 0;\n          var i = 0;\n            for (i=0; i < data.value.length; i++) {\n              console.log(data.value[i])\n                value += data.value[i]\n                j += 1\n            }\n            console.log(value)\n            value = value\n          data.avg = value\n\n          new_ticker = false\n        }\n        return data\n       }\n        )\n        \n    })\n  \n  if (new_ticker) {\n    var new_price = this.state.prices\n\n    new_price.push({\n      ticker: current.ticker,\n      value: [current.value],\n      avg: current.value,\n      time: [current.time]\n     })\n\n    this.setState({prices: new_price})\n    }\n\n  }\n\n\n  add_sell_stock = (current) => {\n    var new_sell = true;\n    \n    this.setState({stocks: this.state.stock.map( data => {\n      //console.log(data.ticker, '==', current.ticker)\n      if (data.ticker === current.ticker) {\n        data.volume += current.volume\n        new_sell = false\n      }\n      return data\n    })\n  \n  })\n\n  if (new_sell) {\n\n    var new_stock = this.state.stock\n     new_stock.push({\n      ticker: current.ticker,\n      volume: current.volume,\n      time: current.time,\n      high: 0,\n      low: 99999999999999999999,\n      last_price: 0,\n      delta_price:0\n\n     })\n\n    this.setState({stocks: new_stock})\n    }\n  }\n\n  disconnect = (e) => {\n    socket.disconnect();\n        console.log('###############################################');\n        console.log('################## DISCONNECT #################');\n        console.log('###############################################');\n  }\n\n  connect = (e) => {\n    socket.connect();\n    console.log('###############################################');\n    console.log('##################  CONNECT   #################');\n    console.log('###############################################');\n  }\n\n\n\n  componentDidMount() {\n    console.log('Página montada')\n    console.log('Encendiendo socket')\n\n    socket.emit(\"EXCHANGES\", (data) => {\n      console.log(data);\n    })\n\n    socket.on(\"UPDATE\", (data) => {\n      this.update(data)\n    });\n       \n    socket.on(\"BUY\", (data) => {\n\n    });\n\n    socket.on(\"SELL\", (data) => {\n      this.add_sell_stock(data)\n    });\n    \n  }\n\n    \n\n  render() {\n\n    //console.log(this.state.data)\n    return (\n      <div className=\"App\">\n\n        <ul className=\"nav-ul\">\n          <li className=\"nav-li\"> <Disconnect disconnect={this.disconnect} />  </li>\n          <li className=\"nav-li\"><Connect connect={this.connect} /></li>\n        </ul>\n         <h1> Mercado de acciones  </h1>\n\n        <Stock className=\"customers\" stock={this.state.stock}/>\n        <Price  prices={this.state.prices}/> \n      </div>\n      );\n    }\n}\n\n\n\n\n\nexport default App;\n*/","map":{"version":3,"sources":["/home/joaquin/Escritorio/t03-taller_integracion/src/App.js"],"names":["React","Component","socketIOClient","socket","path","App","constructor","props","state","updates","componentDidMount","console","log","emit","data","render","startSocket"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AAGA,IAAIC,MAAM,GAAGD,cAAc,CAAC,gCAAD,EAAmC;AACxDE,EAAAA,IAAI,EAAE;AADkD,CAAnC,CAA3B;;AAIA,MAAMC,GAAN,SAAkBJ,SAAlB,CAA4B;AAE1BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE;AADE,KAAb,CAFiB,CAKjB;AAED;;AAIDC,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AAEAT,IAAAA,MAAM,CAACU,IAAP,CAAY,WAAZ,EAA0BC,IAAD,IAAU;AACjCH,MAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACD,KAFD;AAKD;;AAEDC,EAAAA,MAAM,GAAE;AAER,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,QAAQ,EAAE,KAAKC,WAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGG,KAAKR,KAAL,CAAWC,OAHd,CADA,CADF;AASD;;AAnC2B;;AAqC5B,eAAeJ,GAAf;AAGA","sourcesContent":["import React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\n\nvar socket = socketIOClient('wss://le-18262636.bitzonte.com', {\n      path: '/stocks'\n    });\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      updates: []\n    };\n    //this.startSocket = this.startSocket.bind(this);\n    \n  }\n\n\n\n  componentDidMount() {\n    console.log('Página montada')\n    console.log('Encendiendo socket')\n\n    socket.emit(\"EXCHANGES\", (data) => {\n      console.log(data);\n    })\n\n    \n  }\n\n  render(){\n\n  return (\n    <div className=\"App\">\n    <p>\n      HELLO\n      <input type='checkbox' onChange={this.startSocket} ></input>\n      {this.state.updates}\n    </p>\n    </div>\n  );\n}}\n\nexport default App;\n\n\n/*import React, { Component } from 'react';\nimport './App.css';\n//import Graph from './components/graph';\nimport io from 'socket.io-client';\nimport './css/navbar.css'\n\nimport Disconnect from './components/disconnect';\nimport Connect from './components/connect';\nimport Stock from './components/stock';\nimport Price from './components/prices';\n\n\nconst protocolo = \"wss://\";\nconst servidor = \"le-18262636.bitzonte.com\";\nconst ruta = \"/stocks\";\n\nconst socket = io(protocolo + servidor , {\n  path: ruta\n  });\n\n\n\n\n\n\n\nclass App extends Component {\n\n  state = {\n      stock: [\n      ],\n\n      prices: [\n\n      ]\n  }\n  update = (current) => {    \n    //console.log(this.state.prices)\n    var new_ticker = true;\n\n    this.setState({prices: this.state.prices.map( data => {  \n        if (data.ticker === current.ticker) {\n          data.value.push(current.value)\n          data.time.push(current.time)\n          var j = 1;\n          var value = 0;\n          var i = 0;\n            for (i=0; i < data.value.length; i++) {\n              console.log(data.value[i])\n                value += data.value[i]\n                j += 1\n            }\n            console.log(value)\n            value = value\n          data.avg = value\n\n          new_ticker = false\n        }\n        return data\n       }\n        )\n        \n    })\n  \n  if (new_ticker) {\n    var new_price = this.state.prices\n\n    new_price.push({\n      ticker: current.ticker,\n      value: [current.value],\n      avg: current.value,\n      time: [current.time]\n     })\n\n    this.setState({prices: new_price})\n    }\n\n  }\n\n\n  add_sell_stock = (current) => {\n    var new_sell = true;\n    \n    this.setState({stocks: this.state.stock.map( data => {\n      //console.log(data.ticker, '==', current.ticker)\n      if (data.ticker === current.ticker) {\n        data.volume += current.volume\n        new_sell = false\n      }\n      return data\n    })\n  \n  })\n\n  if (new_sell) {\n\n    var new_stock = this.state.stock\n     new_stock.push({\n      ticker: current.ticker,\n      volume: current.volume,\n      time: current.time,\n      high: 0,\n      low: 99999999999999999999,\n      last_price: 0,\n      delta_price:0\n\n     })\n\n    this.setState({stocks: new_stock})\n    }\n  }\n\n  disconnect = (e) => {\n    socket.disconnect();\n        console.log('###############################################');\n        console.log('################## DISCONNECT #################');\n        console.log('###############################################');\n  }\n\n  connect = (e) => {\n    socket.connect();\n    console.log('###############################################');\n    console.log('##################  CONNECT   #################');\n    console.log('###############################################');\n  }\n\n\n\n  componentDidMount() {\n    console.log('Página montada')\n    console.log('Encendiendo socket')\n\n    socket.emit(\"EXCHANGES\", (data) => {\n      console.log(data);\n    })\n\n    socket.on(\"UPDATE\", (data) => {\n      this.update(data)\n    });\n       \n    socket.on(\"BUY\", (data) => {\n\n    });\n\n    socket.on(\"SELL\", (data) => {\n      this.add_sell_stock(data)\n    });\n    \n  }\n\n    \n\n  render() {\n\n    //console.log(this.state.data)\n    return (\n      <div className=\"App\">\n\n        <ul className=\"nav-ul\">\n          <li className=\"nav-li\"> <Disconnect disconnect={this.disconnect} />  </li>\n          <li className=\"nav-li\"><Connect connect={this.connect} /></li>\n        </ul>\n         <h1> Mercado de acciones  </h1>\n\n        <Stock className=\"customers\" stock={this.state.stock}/>\n        <Price  prices={this.state.prices}/> \n      </div>\n      );\n    }\n}\n\n\n\n\n\nexport default App;\n*/"]},"metadata":{},"sourceType":"module"}